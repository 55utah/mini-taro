{"version":3,"file":"pages/page-entry/index.js","mappings":";;;;;;;;;;AAAA;;;;;;;;;;;;;ACAA,8GAAoD;AACpD,qEAA0C;AAE1C,IAAI,CAAC,4BAAgB,EAAC,sBAAS,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,IAAI,EAAE,wBAAwB,EAAE,CAAC,CAAC;;;;;;;;;;;;ACH3F,kBAAkB;;;;;;;;;;;;;;;;;;;;;;AAElB,gGAAsD;AACtD,qEAAqF;AACrF,uEAAmC;AAEnC,4EAAoB;AAEb,MAAM,SAAS,GAAO,GAAG,EAAE;IAEhC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,GAAG,oBAAQ,EAAC,EAAE,CAAC;IACpC,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,oBAAQ,EAAC,CAAC,CAAC;IACrC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,GAAG,oBAAQ,EAAC;QAC/B,EAAE,GAAG,EAAE,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE;QAC1B,EAAE,GAAG,EAAE,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE;QAC1B,EAAE,GAAG,EAAE,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE;KAC3B,CAAC;IAEF,qBAAS,EAAC,GAAG,EAAE;QACb,OAAO,CAAC,GAAG,CAAC,gCAAgC,CAAC;QAC7C,OAAO,GAAG,EAAE;YACV,OAAO,CAAC,GAAG,CAAC,mCAAmC,CAAC;QAClD,CAAC;IACH,CAAC,EAAE,EAAE,CAAC;IAEN,gBAAgB;IAChB,oBAAQ,EAAC,GAAG,EAAE;QACZ,OAAO,CAAC,GAAG,CAAC,6BAA6B,CAAC;IAC5C,CAAC,CAAC;IAEF,aAAa;IACb,sBAAU,EAAC,GAAG,EAAE;QACd,OAAO,CAAC,GAAG,CAAC,8BAA8B,CAAC;IAC7C,CAAC,CAAC;IAEF,aAAa;IACb,sBAAU,EAAC,GAAG,EAAE;QACd,OAAO,CAAC,GAAG,CAAC,8BAA8B,CAAC;IAC7C,CAAC,CAAC;IAEF,MAAM,SAAS,GAAG,GAAG,EAAE;QACrB,QAAQ,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC;IAC5B,CAAC;IAED,MAAM,UAAU,GAAG,CAAC,CAAM,EAAE,EAAE;;QAC5B,MAAM,KAAK,GAAG,QAAC,aAAD,CAAC,uBAAD,CAAC,CAAE,MAAM,0CAAE,KAAK,KAAI,EAAE;QACpC,OAAO,CAAC,KAAK,CAAC;IAChB,CAAC;IAED,MAAM,OAAO,GAAG,GAAG,EAAE;QACnB,OAAO,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,MAAM,GAAG,CAAC,EAAE,KAAK,EAAE,MAAM,GAAG,CAAC,MAAM,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC;IACvF,CAAC;IAED,MAAM,UAAU,GAAG,GAAG,EAAE;QACtB,OAAO,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IAC5D,CAAC;IAED,MAAM,EAAE,GAAG,GAAG,EAAE;QACd,aAAM,CAAC,UAAU,CAAC;YAChB,GAAG,EAAE,0BAA0B;SAChC,CAAC;IACJ,CAAC;IAED,OAAO,CACL,8BAAC,YAAI,IAAC,SAAS,EAAC,SAAS;QACvB,8BAAC,YAAI,IAAC,KAAK,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE;YAC5B,8BAAC,YAAI,IAAC,KAAK,EAAE,EAAE,QAAQ,EAAE,MAAM,EAAE,UAAU,EAAE,KAAK,EAAE,wBAAgB;YACpE,8BAAC,YAAI,IAAC,SAAS,EAAC,cAAc,sBAAa,CACtC;QACP,8BAAC,YAAI,uBAAU;QACf,8BAAC,YAAI,IAAC,KAAK,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,IAC1B,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE;YACd,OAAO,8BAAC,YAAI,IAAC,GAAG,EAAE,CAAC,CAAC,GAAG,IAAG,CAAC,CAAC,KAAK,CAAQ;QAC3C,CAAC,CAAC,CACG;QACP,8BAAC,YAAI,IAAC,SAAS,EAAC,cAAc;YAC5B,8BAAC,cAAM,IAAC,OAAO,EAAE,GAAG,EAAE,CAAC,OAAO,EAAE,EAAE,IAAI,EAAC,MAAM,mCAEpC;YACT,8BAAC,cAAM,IAAC,OAAO,EAAE,GAAG,EAAE,CAAC,UAAU,EAAE,EAAE,IAAI,EAAC,SAAS,mCAE1C,CACJ;QACP,8BAAC,YAAI,IAAC,KAAK,EAAE,EAAE,MAAM,EAAE,QAAQ,EAAE;YAC/B,8BAAC,YAAI;;gBAAS,KAAK,CAAQ;YAC3B,8BAAC,cAAM,IAAC,OAAO,EAAE,GAAG,EAAE,CAAC,SAAS,EAAE,EAAE,IAAI,EAAC,SAAS,+BAEzC,CACJ;QACP,8BAAC,YAAI;YACH,8BAAC,YAAI;;gBAAQ,IAAI,CAAQ;YACzB,8BAAC,aAAK,IACJ,KAAK,EAAE,EAAE,MAAM,EAAE,gBAAgB,EAAE,EACnC,OAAO,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,GAC7B,CACG;QACP,8BAAC,YAAI,IAAC,KAAK,EAAE,EAAE,SAAS,EAAE,MAAM,EAAE;YAChC,8BAAC,cAAM,IAAC,IAAI,EAAC,SAAS,EAAC,OAAO,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,2CAEjC,CACJ,CACF,CACR;AACH,CAAC;AA/FY,iBAAS,aA+FrB;;;;;;;;;;;;ACvGD,kBAAkB;;;AAEL,cAAM,GAAG,GAAG,EAAE,IAAI,GAAG,EAAE,IAAI,GAAG,EAAE,IAAI,GAAG,EAAE,IAAI,GAAG,EAAE,IAAI,GAAG,EAAE,IAAI,KAAK,EAAE;AAEnF,SAAS,GAAG,KAAI,IAAG;IAAC,OAAO,EAAE;CAAC;AAAA,OAAM,CAAC,EAAC;IAAC,OAAO,SAAS;CAAC,EAAC;AACzD,SAAS,GAAG,KAAI,IAAG;IAAC,OAAO,EAAE;CAAC;AAAA,OAAM,CAAC,EAAC;IAAC,OAAO,SAAS;CAAC,EAAC;AACzD,SAAS,GAAG,KAAI,IAAG;IAAC,OAAO,EAAE;CAAC;AAAA,OAAM,CAAC,EAAC;IAAC,OAAO,SAAS;CAAC,EAAC;AACzD,SAAS,GAAG,KAAI,IAAG;IAAC,OAAO,EAAE;CAAC;AAAA,OAAM,CAAC,EAAC;IAAC,OAAO,SAAS;CAAC,EAAC;AACzD,SAAS,GAAG,KAAI,IAAG;IAAC,OAAO,EAAE;CAAC;AAAA,OAAM,CAAC,EAAC;IAAC,OAAO,SAAS;CAAC,EAAC;AACzD,SAAS,GAAG,KAAI,IAAG;IAAC,OAAO,IAAI;CAAC;AAAA,OAAM,CAAC,EAAC;IAAC,OAAO,SAAS;CAAC,EAAC;AAC3D,SAAS,KAAK,KAAK,MAAM,IAAI,KAAK,CAAC,WAAW,CAAC,EAAC,CAAC;;;;;;;;;;;;;;;;;ACVjD,mGAA6C;AAC7C,iFAA6C;AAC7C,wEAAiC;AACjC,0FAA6D;AAI7D,MAAM,WAAW,GAAG,IAAI,0BAAW,CAAC;IAClC,EAAE,EAAE,QAAQ;IACZ,KAAK,EAAE,EAAE;IACT,QAAQ,EAAE,MAAM;IAChB,IAAI,EAAE,oBAAQ,CAAC,IAAI;CACpB,CAAC;AAMF,MAAM,CAAC,GAAG,eAAK,CAAC,aAAa;AAE7B,MAAM,SAAS,GAAQ,EAAE;AAEd,mBAAW,GAA0B,SAAS;AAEzD,MAAM,gBAAgB,GAAG,CAAC,EAAU,EAAE,EAAE;IACtC,OAAO,CAAC,SAA6B,EAAE,EAAE;QACvC,IAAI,mBAAW,KAAK,SAAS,EAAE;YAC7B,mBAAW,GAAG,eAAK,CAAC,aAAa,CAAC,EAAE,CAAC;SACtC;QAED,OAAO,MAAM,IAAK,SAAQ,eAAK,CAAC,SAAS;YACvC,iBAAiB,CAAC,KAAY,EAAE,IAAqB;gBACnD,IAAI,IAAqC,EAAE;oBACzC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC;oBACnB,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC;iBACnC;YACH,CAAC;YAED,MAAM;gBACJ,+CAA+C;gBAC/C,OAAO,CAAC,CACN,MAAM,EACN,EAAE,MAAM,EAAE,EAAE,EAAE,EACd,CAAC,CACC,mBAAW,CAAC,QAAQ,EACpB,EAAE,KAAK,EAAE,EAAE,EAAE,EACb,CAAC,CAAC,SAAS,oBAAO,IAAI,CAAC,KAAK,EAAG,CAChC,CACF;YACH,CAAC;SACF;IACH,CAAC;AACH,CAAC;AAEM,MAAM,eAAe,GAAG,CAAC,GAAyB,EAAE,EAAE;IAC3D,yDAAyD;IACzD,MAAM,UAAW,SAAQ,eAAK,CAAC,SAAS;QAAxC;;YACS,UAAK,GAAoB,EAAE;YAC3B,aAAQ,GAAkB,EAAE;QA4BrC,CAAC;QA1BQ,KAAK,CAAC,SAAgC,EAAE,EAAU,EAAE,EAAc;YACvE,MAAM,GAAG,GAAG,EAAE;YACd,MAAM,IAAI,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,SAAS,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC;YACjD,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;YAErB,SAAS;YACT,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC;QACtB,CAAC;QAEM,OAAO,CAAC,EAAU,EAAE,EAAc;YACvC,MAAM,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,KAAK,EAAE,CAAC;YACpE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC;YAE5B,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC;QACtB,CAAC;QAEM,MAAM;YACX,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;gBAC5B,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,EAAG;gBAC9B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;aAC3B;YAED,MAAM,KAAK,GAAmC,IAAI;YAElD,OAAO,eAAK,CAAC,aAAa,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;QAC/D,CAAC;KACF;IAED,MAAM,OAAO,GAAe,mBAAM,EAChC,eAAK,CAAC,aAAa,CAAC,UAAU,CAAC,EAC/B,WAAW,CACE;IAEf,MAAM,YAAY,GAAG,GAAG,EAAE;QACxB,oBAAoB;QACpB,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;YAC3B,KAAK,EAAE,UACL,SAA6B,EAC7B,EAAU,EACV,EAAc;gBAEd,MAAM,IAAI,GAAG,gBAAgB,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC;gBAC5C,OAAO,CAAC,KAAK,CAAC,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;YAC7B,CAAC;YACD,OAAO,EAAE,UAAU,EAAU,EAAE,EAAc;gBAC3C,OAAO,CAAC,OAAO,CAAC,EAAE,EAAE,EAAE,CAAC;YACzB,CAAC;YACD,QAAQ,EAAE,UAAU,OAAgC;gBAClD,OAAO,CAAC,IAAI,CAAC,cAAc,CAAC;YAC9B,CAAC;YACD,MAAM,EAAE,UAAU,OAAY;gBAC5B,EAAE;YACJ,CAAC;YACD,MAAM,EAAE;gBACN,EAAE;YACJ,CAAC;YACD,OAAO,EAAE,UAAU,GAAQ;gBACzB,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,GAAG,CAAC;YAC/B,CAAC;YACD,OAAO,EAAE;gBACP,OAAO,WAAW;YACpB,CAAC;SACF,CAAC;QAEF,OAAO,MAAM;IACf,CAAC;IAED,OAAO,YAAY,EAAE;AACvB,CAAC;AA1EY,uBAAe,mBA0E3B;AAED,mDAAmD;AACnD,gBAAgB;AAChB,SAAgB,uBAAuB,CACrC,WAAwB,EACxB,GAAW;;IAEX,MAAM,KAAK,GAAkB,EAAE;IAC/B,IAAI,MAAM,GAAgC,SAAS;IACnD,SAAS;IACT,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC;IACvB,OAAO,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;QACvB,MAAM,CAAC,GAAG,KAAK,CAAC,KAAK,EAAG;QACxB,IAAI,CAAC,CAAC,YAAY,CAAC,QAAQ,CAAC,KAAK,GAAG,EAAE;YACpC,MAAM,GAAG,CAAoB;YAC7B,MAAK;SACN;aAAM;YACL,OAAC,CAAC,QAAQ,0CAAE,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAC5C;KACF;IACD,OAAO,MAAM;AACf,CAAC;AAlBD,0DAkBC;AAED,aAAa;AACb,SAAgB,kBAAkB,CAChC,WAAwB,EACxB,EAAU;;IAEV,MAAM,KAAK,GAAkB,EAAE;IAC/B,IAAI,MAAM,GAA4B,SAAS;IAC/C,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC;IACvB,OAAO,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;QACvB,MAAM,CAAC,GAAG,KAAK,CAAC,KAAK,EAAG;QACxB,IAAI,CAAC,CAAC,YAAY,CAAC,KAAK,CAAC,KAAK,EAAE,EAAE;YAChC,MAAM,GAAG,CAAgB;YACzB,MAAK;SACN;aAAM;YACL,OAAC,CAAC,QAAQ,0CAAE,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAC5C;KACF;IACD,OAAO,MAAM;AACf,CAAC;AAjBD,gDAiBC;;;;;;;;;;;;;;;;;AC1KD,mGAAgE;AAChE,mGAI0B;AAE1B,kEAAmC;AAI5B,MAAM,gBAAgB,GAAG,CAC9B,SAAwB,EACxB,QAAiC,EACjC,UAA4B,EAC5B,EAAE;IACF,MAAM,EAAE,IAAI,EAAE,GAAG,UAAU;IAC3B,MAAM,OAAO,GAAG,IAAI;IAEpB,IAAI,GAAG,GAAQ,IAAI;IACnB,IAAI;QACF,GAAG,GAAG,MAAM,EAAE;KACf;IAAC,OAAO,CAAC,EAAE;QACV,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;KACjB;IAED,MAAM,cAAc,GAAG,GAAG,EAAE;QAC1B,MAAM,WAAW,GAAI,GAAW,CAAC,OAAO,EAAE;QAC1C,OAAO,6CAAuB,EAAC,WAAW,EAAE,OAAO,CAAoB;IACzE,CAAC;IAED,MAAM,UAAU,GAAG,CAAC,EAAU,EAAE,EAAE;QAChC,MAAM,WAAW,GAAI,GAAW,CAAC,OAAO,EAAE;QAC1C,OAAO,wCAAkB,EAAC,WAAW,EAAE,EAAE,CAAC;IAC5C,CAAC;IAED,eAAe;IACf,MAAM,YAAY,GAAG,CAAC,CAAM,EAAE,EAAE;QAC9B,8BAA8B;QAC9B,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,aAAa,GAAG,EAAE,EAAE,GAAG,CAAC,IAAI,EAAE;QACvD,MAAM,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,aAAa;QACjC,MAAM,WAAW,GAAG,cAAc,EAAE;QACpC,IAAI,EAAE,KAAI,WAAW,aAAX,WAAW,uBAAX,WAAW,CAAE,GAAG,GAAE;YAC1B,MAAM,cAAc,GAAG,UAAU,CAAC,EAAE,CAAC;YACrC,IAAI,CAAC,cAAc;gBAAE,OAAM;YAC3B,cAAc,CAAC,aAAa,CAAC,SAAS,EAAE,CAAC,CAAC;SAC3C;IACH,CAAC;IAED,MAAM,YAAY,GAAG,GAAG,EAAE;QACxB,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;YAC3B,IAAI,EAAE,QAAQ;YACd,MAAM,EAAE,UAAU,OAAgB;gBAChC,OAAO,CAAC,IAAI,CAAC,aAAa,EAAE,OAAO,CAAC;gBACpC,YAAY;gBACZ,MAAM,IAAI,GAAG,IAAI;gBACjB,IAAI,CAAC,SAAS,GAAG,OAAO;gBACxB,GAAG;oBACD,GAAG,CAAC,KAAK,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,GAAG,EAAE;wBACxC,MAAM,WAAW,GAAG,cAAc,EAAE;wBACpC,IAAI,WAAW,EAAE;4BACf,WAAW,CAAC,GAAG,GAAG,IAAI;4BACtB,WAAW,CAAC,aAAa,EAAE;yBAC5B;oBACH,CAAC,CAAC;YACN,CAAC;YACD,MAAM,EAAE;gBACN,WAAW,CAAC,QAAQ,EAAE,OAAO,CAAC;YAChC,CAAC;YACD,MAAM,EAAE;gBACN,WAAW,CAAC,QAAQ,EAAE,OAAO,CAAC;YAChC,CAAC;YACD,OAAO,EAAE;gBACP,WAAW,CAAC,SAAS,EAAE,OAAO,CAAC;YACjC,CAAC;YACD,QAAQ,EAAE;gBACR,GAAG;oBACD,GAAG,CAAC,OAAO,CAAC,OAAO,EAAE,GAAG,EAAE;wBACxB,OAAO,CAAC,IAAI,CAAC,SAAS,OAAO,UAAU,CAAC;oBAC1C,CAAC,CAAC;YACN,CAAC;YACD,EAAE,EAAE,YAAY;SACjB,CAAC;QAEF,OAAO,MAAM;IACf,CAAC;IAED,OAAO,YAAY,EAAE;AACvB,CAAC;AA7EY,wBAAgB,oBA6E5B;AAED,MAAM,KAAK,GAAG,IAAI,GAAG,EAAiC;AAEtD,SAAS,WAAW,CAAC,SAAiB,EAAE,GAAW;IACjD,qBAAqB;IACrB,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC;QAAE,OAAM;IAC3B,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,CAAC,GAAG,CAAE;IAC9B,MAAM,EAAE,GAAG,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC;IAChC,IAAI,EAAE,IAAI,qBAAU,EAAC,EAAE,CAAC,EAAE;QACxB,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC;KACd;AACH,CAAC;AAED,SAAgB,QAAQ,CAAC,SAAiB;IACxC,OAAO,CAAC,EAAY,EAAE,EAAE;QACtB,eAAe;QACf,MAAM,EAAE,GAAG,eAAK,CAAC,UAAU,CAAC,6BAAW,CAAC;QACxC,MAAM,KAAK,GAAG,eAAK,CAAC,MAAM,CAAC,EAAE,CAAC;QAE9B,eAAK,CAAC,eAAe,CAAC,GAAG,EAAE;YACzB,IAAI,CAAC,qBAAU,EAAC,KAAK,CAAC,OAAO,CAAC;gBAAE,OAAM;YACtC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC;gBAAE,KAAK,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,GAAG,EAAE,CAAC;YAC5C,MAAM,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC,EAAE,CAAE;YAC1B,GAAG,CAAC,GAAG,CAAC,SAAS,EAAE,KAAK,CAAC,OAAO,CAAC;QACnC,CAAC,EAAE,EAAE,CAAC;IACR,CAAC;AACH,CAAC;AAbD,4BAaC;;;;;;;;;;;;;;ACnHD;;;GAGG;AACH,sGAA8C;AAEjC,gBAAQ,GAAG,+BAAQ,EAAC,SAAS,CAAC;AAE9B,kBAAU,GAAG,+BAAQ,EAAC,QAAQ,CAAC;AAE/B,kBAAU,GAAG,+BAAQ,EAAC,QAAQ,CAAC;;;;;;;;;;;;ACV5C,uCAAuC;;;;;;AAEvC,oIAA8D;AAyM5D,0BAzMK,0BAAe,CAyML;AAxMjB,iFAAuD;AACvD,kEAAoD;AACpD,0FAAuE;AAEvE,SAAgB,WAAW,CAAE,GAAgB,EAAE,QAAe,EAAE,QAAe;IAC7E,IAAI,CAAS;IAEb,KAAK,CAAC,IAAI,QAAQ,EAAE;QAClB,IAAI,CAAC,CAAC,CAAC,IAAI,QAAQ,CAAC,EAAE;YACpB,WAAW,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC;SACvC;KACF;IACD,KAAK,CAAC,IAAI,QAAQ,EAAE;QAClB,IAAI,QAAQ,CAAC,CAAC,CAAC,KAAK,QAAQ,CAAC,CAAC,CAAC,EAAE;YAC/B,WAAW,CAAC,GAAG,EAAE,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC;SAC9C;KACF;AACH,CAAC;AAbD,kCAaC;AAED,SAAS,WAAW,CAAE,CAAS;IAC7B,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG;AACrC,CAAC;AAED,SAAS,QAAQ,CAAC,GAAgB,EAAE,IAAY,EAAE,KAAc;IAC9D,IAAI,SAAS,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;IAE3C,IAAI,SAAS,KAAK,OAAO,EAAE;QACzB,SAAS,GAAG,KAAK;KAClB;IAED,IAAI,OAAO,KAAK,KAAK,UAAU,EAAE;QAC/B,GAAG,CAAC,gBAAgB,CAAC,SAAS,EAAE,KAAK,CAAC;KACvC;SAAM;QACL,GAAG,CAAC,mBAAmB,CAAC,SAAS,CAAC;KACnC;AACH,CAAC;AAED;;GAEG;AACH,SAAS,WAAW,CAAE,GAAgB,EAAE,IAAY,EAAE,KAAc,EAAE,QAAkB;IACtF,kBAAkB;IAClB,IAAI,GAAG,IAAI,KAAK,WAAW,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI;IAE5C,IACE,IAAI,KAAK,KAAK;QACd,IAAI,KAAK,UAAU;QACnB,IAAI,KAAK,KAAK,EACd;QACA,KAAK;KACN;SAAM,IAAI,IAAI,KAAK,OAAO,EAAE;QAC3B,oBAAoB;KACrB;SAAM,IAAI,WAAW,CAAC,IAAI,CAAC,EAAE;QAC5B,cAAc;QACd,QAAQ,CAAC,GAAG,EAAE,IAAI,EAAE,KAAK,CAAC;KAC3B;SAAM,IAAI,KAAK,IAAI,IAAI,EAAE;QACxB,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC;KAC1B;SAAM;QACL,GAAG,CAAC,YAAY,CAAC,IAAI,EAAE,KAAe,CAAC;KACxC;AACH,CAAC;AAED,MAAM,UAAU,GAcZ;IACF,cAAc,CACZ,IAAY,EACZ,KAAY,EACZ,aAA0B,EAC1B,WAAoB,EACpB,cAAuB;QAEvB,MAAM,IAAI,GAAG;YACX,EAAE,EAAE,mBAAQ,GAAE;YACd,IAAI,EAAE,kBAAW,CAAC,IAAI,CAAC,IAAI,oBAAQ,CAAC,IAAI;YACxC,QAAQ,EAAE,IAAgB;YAC1B,KAAK;YACL,QAAQ,EAAE,EAAE;SACb;QACD,IAAI,IAAI,KAAK,MAAM,EAAE;YACnB,OAAO,IAAI,8BAAe,CAAC,IAAI,CAAC;SACjC;aAAM;YACL,OAAO,IAAI,0BAAW,CAAC,IAAI,CAAC;SAC7B;IACH,CAAC;IACD,kBAAkB,CAChB,IAAY,EACZ,aAAuB,EACvB,WAAoB,EACpB,cAAuB;QAEvB,MAAM,KAAK,GAAG,IAAI,uBAAQ,CAAC;YACzB,EAAE,EAAE,mBAAQ,GAAE;YACd,IAAI,EAAE,oBAAQ,CAAC,IAAI;YACnB,QAAQ,EAAE,MAAM;YAChB,KAAK,EAAE,EAAE;YACT,IAAI;SACL,CAAC;QACF,OAAO,KAAK;IACd,CAAC;IACD,iBAAiB,CAAE,IAAiB;QAClC,OAAO,IAAI;IACb,CAAC;IAED,kBAAkB;QAChB,OAAO,EAAE;IACX,CAAC;IAED,mBAAmB;QACjB,OAAO,EAAE;IACX,CAAC;IAED,WAAW,CAAE,MAAM,EAAE,KAAK;QACxB,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC;IAC3B,CAAC;IAED,kBAAkB,CAAE,MAAM,EAAE,KAAK;QAC/B,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC;IAC3B,CAAC;IAED,sBAAsB,CAAE,MAAM,EAAE,KAAK;QACnC,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC;IAC3B,CAAC;IAED,WAAW,CAAE,MAAM,EAAE,KAAK;QACxB,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC;IAC3B,CAAC;IAED,wBAAwB,CAAE,MAAM,EAAE,KAAK;QACrC,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC;IAC3B,CAAC;IAED,YAAY,CAAE,MAAM,EAAE,KAAK,EAAE,QAAQ;QACnC,MAAM,CAAC,YAAY,CAAC,KAAK,EAAE,QAAQ,CAAC;IACtC,CAAC;IAED,uBAAuB,CAAE,MAAM,EAAE,KAAK,EAAE,QAAQ;QAC9C,MAAM,CAAC,YAAY,CAAC,KAAK,EAAE,QAAQ,CAAC;IACtC,CAAC;IAED,gBAAgB,CAAE,QAAQ,EAAE,CAAC,EAAE,OAAO;QACpC,QAAQ,CAAC,WAAW,GAAG,OAAO;IAChC,CAAC;IAED,uBAAuB,CAAE,GAAG,EAAE,CAAC,EAAE,KAAK;QACpC,WAAW,CAAC,GAAG,EAAE,EAAE,EAAE,KAAK,CAAC;QAC3B,OAAO,KAAK;IACd,CAAC;IAED,aAAa;QACX,OAAO,EAAE;IACX,CAAC;IAED,YAAY,CAAE,GAAG,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ;QACpD,WAAW,CAAC,GAAG,EAAE,QAAQ,EAAE,QAAQ,CAAC;IACtC,CAAC;IAED,cAAc,CAAE,OAAO;QACrB,IAAI,OAAO,CAAC,QAAQ,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;YACnD,OAAO,CAAC,QAAQ,GAAG,EAAE;SACtB;IACH,CAAC;IAED,oBAAoB,EAAE,GAAG,EAAE,CAAC,KAAK;IACjC,gBAAgB,CAAE,GAAG,CAAQ,IAAI,OAAO,IAAI,EAAC,CAAC;IAC9C,gBAAgB,EAAE,WAAI;IACtB,WAAW,EAAE,WAAI;IACjB,GAAG,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;IACrB,aAAa,EAAE,YAAY;IAC3B,eAAe,EAAE,UAAU;IAC3B,kBAAkB,EAAE,WAAI;IACxB,SAAS,EAAE,CAAC,CAAC;IACb,gBAAgB,EAAE,IAAI;IACtB,mBAAmB,EAAE,KAAK;IAC1B,iBAAiB,EAAE,IAAI;IACvB,iBAAiB,EAAE,KAAK;CACzB;AAED,MAAM,cAAc,GAAG,8BAAe,EAAC,UAAU,CAAC;AAShD,wCAAc;;;;;;;;;;;;;;;;;;;;;;;;;AC1MhB,iFAAgD;AAIhD,MAAM,OAAO,GAAG,CAAC,QAA2B,EAAE,EAAE;IAC9C,OAAO,CAAC,QAAQ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,QAAQ,CAAC,MAAM,KAAK,CAAC,CAAC;AACxE,CAAC;AAEM,MAAM,WAAW,GAAG,CAAC,EAAU,EAAE,EAAE,CAAC,KAAK,EAAE,EAAE;AAAvC,mBAAW,eAA4B;AAEpD;;;;;GAKG;AACI,MAAM,OAAO,GAAG,CAAC,IAAiB,EAAY,EAAE;IACrD,IAAI,IAAI,CAAC,IAAI,KAAK,oBAAQ,CAAC,IAAI,IAAI,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;QACzD,OAAO;YACL,gBAAY,EAAE,IAAI,CAAC,IAAI,IAAI,EAAE;YAC7B,qBAAgB,EAAE,IAAI,CAAC,QAAQ;SAChC;KACF;SAAM;QACL,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,EAAE,EAAE,QAAQ,EAAE,GAAG,IAAI;QAC9C,MAAM,KAA0D,KAAK,IAAI,EAAE,EAArE,EAAE,SAAS,EAAE,KAAK,EAAE,QAAQ,EAAE,SAAS,OAA8B,EAAzB,SAAS,cAArD,kCAAuD,CAAc;QAE3E,oBAAoB;QACpB,IAAI,YAAY,GAAG,EAAE;QACrB,IAAI,CAAC,CAAC,KAAK,EAAE;YACX,KAAK,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,KAAe,CAAC,EAAE;gBAC1D,YAAY,IAAI,GAAG,0BAAc,EAAC,GAAG,CAAC,KAAK,KAAK,GAAG;aACpD;SACF;QAED,uBACE,uBAAkB,EAAE,CAAC,CAAC,QAAQ,IAAI,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,eAAO,CAAC,CAAC,CAAC,CAAC,EAAE,EACtF,qBAAgB,EAAE,QAAQ,EAC1B,kBAAa,EAAE,SAAmB,IAAI,EAAE,EACxC,kBAAa,EAAE,YAAsB,EACrC,GAAG,EAAE,uBAAW,EAAC,EAAE,CAAC,IACjB,SAAS,EACb;KACF;AACH,CAAC;AA3BY,eAAO,WA2BnB;AAED,wBAAwB;AACjB,MAAM,cAAc,GAAG,CAAC,IAAY,EAAE,EAAE;IAC7C,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC;IAC3B,MAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IAClD,IAAI,KAAK,IAAI,CAAC;QAAE,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,WAAW,EAAE,CAAC;IACtE,OAAO,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC;AACtB,CAAC;AALY,sBAAc,kBAK1B;;;;;;;;;;;;;;;;;;;;;;;;ACnDD,oGAAqD;AAA5C,qIAAgB;AACzB,iGAAmD;AAA1C,kIAAe;AACxB,4EAAuB;AACvB,oGAAmC;;;;;;;;;;;;ACHnC,kCAAkC;;;AAIlC,IAAK,QAIJ;AAJD,WAAK,QAAQ;IACX,uCAAI;IACJ,uCAAI;IACJ,uCAAI;AACN,CAAC,EAJI,QAAQ,KAAR,QAAQ,QAIZ;AAyCC,4BAAQ;;;;;;;;;;;;ACjDV,SAAS;AACT,8BAA8B;;;;;;;;;;;;;;;;;AAE9B,mGAA4C;AAI5C,MAAM,qBAAqB,GAAG,CAAC,IAAY,EAAE,KAA+B,EAAE,EAAE;IAC9E,OAAO,CAAC,MAAqH,EAAE,EAAE;QAC/H,MAAM,KAA8B,MAAM,IAAI,EAAE,EAA1C,EAAE,QAAQ,OAAgC,EAA3B,UAAU,cAAzB,YAA2B,CAAe;QAChD,OAAO,eAAK,CAAC,aAAa,CAAC,IAAI,oBAAO,UAAU,GAAI,QAAQ,CAAC;IAC/D,CAAC;AACH,CAAC;AAEY,YAAI,GAAG,qBAAqB,CAAC,MAAM,EAAE,EAAE,CAAC;AAExC,YAAI,GAAG,qBAAqB,CAAC,MAAM,EAAE,EAAE,CAAC;AAExC,cAAM,GAAG,qBAAqB,CAAC,QAAQ,EAAE,EAAE,CAAC;AAE5C,aAAK,GAAG,qBAAqB,CAAC,OAAO,EAAE,EAAE,CAAC;;;;;;;;;;;;ACpBvD,uCAAuC;;;AAGvC,uFAA8C;AAI9C,MAAM,MAAM,GAAG,CAAC,SAAoB,EAAE,SAAsB,EAAE,EAAE;IAE9D,IAAI,CAAC,SAAS,CAAC,cAAc,EAAE;QAC7B,SAAS,CAAC,cAAc,GAAG,4BAAc,CAAC,eAAe,CAAC,SAAS,EAAE,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;KACtF;IAED,4BAAc,CAAC,eAAe,CAAC,SAAS,EAAE,SAAS,CAAC,cAAc,EAAE,IAAI,CAAC;IAEzE,OAAO,4BAAc,CAAC,qBAAqB,CAAC,SAAS,CAAC,cAAc,CAAC;AACvE,CAAC;AAEQ,wBAAM;;;;;;;;;;;;;;ACjBF,gBAAQ,GAAG,MAAM;AAE9B,cAAc;AACd,IAAkB,KASjB;AATD,WAAkB,KAAK;IACrB,gCAAuB;IACvB,0BAAiB;IACjB,mBAAU;IACV,wBAAe;IACf,wBAAe;IACf,qBAAY;IACZ,qBAAY;IACZ,oBAAW;AACb,CAAC,EATiB,KAAK,GAAL,aAAK,KAAL,aAAK,QAStB;;;;;;;;;;;;;;ACZD,iFAA8C;AAC9C,2EAAiD;AAEjD,MAAa,WAAW;IAatB,YAAY,MAOX;QAVM,eAAU,GAAuB,IAAI;QACrC,eAAU,GAA0B,IAAI,GAAG,EAAE;QAUlD,MAAM,EAAE,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,MAAM;QAC5D,IAAI,CAAC,EAAE,GAAG,EAAE;QACZ,IAAI,CAAC,IAAI,GAAG,IAAI;QAChB,IAAI,CAAC,QAAQ,GAAG,QAAQ;QACxB,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,GAAG,EAAE,yBAAW,EAAC,EAAE,CAAC,EAAE,EAAE,KAAK,CAAC;QAC3D,uBAAuB;QACvB,IAAI,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,EAAE;YAC1B,OAAO,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC;SAC9B;QACD,IAAI,CAAC,QAAQ,GAAG,QAAQ;QACxB,IAAI,CAAC,IAAI,GAAG,IAAI;IAClB,CAAC;IAEO,iBAAiB;;QACvB,IAAI,CAAC,IAAI,CAAC,UAAU;YAAE,OAAM;QAC5B,MAAM,KAAK,GAAG,UAAI,CAAC,UAAU,CAAC,QAAQ,0CAAE,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,CAAC;QAC1E,IAAI,CAAC,KAAK,IAAI,KAAK,GAAG,CAAC;YAAE,OAAM;QAC/B,UAAI,CAAC,KAAK,0CAAE,aAAa,CAAC;YACxB,IAAI,EAAE,GAAG,UAAI,CAAC,UAAU,0CAAE,KAAK,IAAI,qBAAgB,IAAI,KAAK,GAAG;YAC/D,KAAK,EAAE,qBAAO,EAAC,IAAI,CAAC;SACrB,CAAC;IACJ,CAAC;IAED,YAAY,CAAC,IAAY,EAAE,KAAc;QACvC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,KAAK;QACxB,IAAI,CAAC,iBAAiB,EAAE;IAC1B,CAAC;IAED,YAAY,CAAC,IAAY;QACvB,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;IACzB,CAAC;IAED,eAAe,CAAC,IAAY;QAC1B,IAAI,IAAI,IAAI,IAAI,CAAC,KAAK,EAAE;YACtB,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;YACvB,IAAI,CAAC,iBAAiB,EAAE;SACzB;IACH,CAAC;IAED,IAAI,KAAK;QACP,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU;QAClC,IAAI,CAAC,UAAU,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,QAAQ,CAAC;YAAE,OAAO,EAAE;QACjE,MAAM,KAAK,GAAG,UAAU,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,CAAC;QACpE,OAAO,GAAG,UAAU,CAAC,KAAK,IAAI,qBAAgB,IAAI,KAAK,GAAG;IAC5D,CAAC;IAED,IAAc,KAAK;;QACjB,OAAO,WAAI,CAAC,UAAU,0CAAE,KAAK,KAAI,IAAI;IACvC,CAAC;IAED,WAAW,CAAC,KAAkB;;QAC5B,KAAK,CAAC,UAAU,GAAG,IAAI;QACvB,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAClB,IAAI,CAAC,QAAQ,GAAG,CAAC,KAAK,CAAC;SACxB;aAAM;YACL,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC;SAC1B;QACD,UAAI,CAAC,KAAK,0CAAE,aAAa,CAAC;YACxB,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,IAAI,qBAAgB,EAAE;YACzC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,iBAAO,CAAC;SAClC,CAAC;IACJ,CAAC;IAED,YAAY,CAAC,KAAkB,EAAE,WAAwB;;QACvD,IAAI,CAAC,IAAI,CAAC,QAAQ;YAAE,OAAM;QAC1B,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,WAAW,CAAC,EAAE,CAAC;QAC3E,IAAI,KAAK,GAAG,CAAC;YAAE,OAAM;QACrB,KAAK,CAAC,UAAU,GAAG,IAAI;QACvB,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,KAAK,CAAC;QACrC,UAAI,CAAC,KAAK,0CAAE,aAAa,CAAC;YACxB,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,IAAI,qBAAgB,EAAE;YACzC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,iBAAO,CAAC;SAClC,CAAC;IACJ,CAAC;IAED,WAAW,CAAC,KAAkB;;QAC5B,IAAI,CAAC,IAAI,CAAC,QAAQ;YAAE,OAAM;QAC1B,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,KAAK,CAAC,EAAE,CAAC;QACrE,IAAI,KAAK,GAAG,CAAC;YAAE,OAAM;QACrB,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC;QAC9B,UAAI,CAAC,KAAK,0CAAE,aAAa,CAAC;YACxB,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,IAAI,qBAAgB,EAAE;YACzC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,iBAAO,CAAC;SAClC,CAAC;IACJ,CAAC;IAED,gBAAgB,CAAC,SAAiB,EAAE,KAAe;QACjD,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,SAAS,EAAE,KAAK,CAAC;IACvC,CAAC;IAED,mBAAmB,CAAC,SAAiB;QACnC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,SAAS,CAAC;IACnC,CAAC;IAED,gBAAgB;IAChB,gCAAgC;IAChC,aAAa,CAAC,SAAiB,EAAE,CAAU;QACzC,IAAI,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE;YAClC,MAAM,EAAE,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,SAAS,CAAC;YACzC,OAAO,EAAE,KAAK,UAAU,IAAI,EAAE,CAAC,CAAC,CAAC;SAClC;IACH,CAAC;CACF;AA3HD,kCA2HC;AAED,MAAa,QAAS,SAAQ,WAAW;IAEvC,YAAY,MAOX;QACC,KAAK,CAAC,MAAM,CAAC;QACb,IAAI,CAAC,QAAQ,GAAG,OAAO;IACzB,CAAC;IAED,IAAI,WAAW,CAAC,IAAY;;QAC1B,IAAI,CAAC,IAAI,GAAG,IAAI;QAChB,UAAI,CAAC,KAAK,0CAAE,aAAa,CAAC;YACxB,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,IAAI,cAAU,EAAE;YACnC,KAAK,EAAE,IAAI;SACZ,CAAC;IACJ,CAAC;CACF;AArBD,4BAqBC;AAED,MAAa,eAAgB,SAAQ,WAAW;IAK9C,YAAY,MAOX;QACC,KAAK,CAAC,MAAM,CAAC;QAZR,mBAAc,GAAoB,EAAE;QACpC,QAAG,GAAsB,IAAI;QAC5B,kBAAa,GAAY,KAAK;IAWtC,CAAC;IAED,IAAI,KAAK;QACP,OAAO,IAAI;IACb,CAAC;IAED,yBAAyB;IACzB,IAAI,KAAK;QACP,OAAO,oBAAQ;IACjB,CAAC;IAEM,aAAa,CAAE,OAAsB;QAC1C,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC;QAEjC,OAAO,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,CAAC;QAExD,IAAI,CAAC,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,GAAG,KAAK,IAAI,EAAE;YAC5C,IAAI,CAAC,aAAa,EAAE;SACrB;IACH,CAAC;IAEM,aAAa;QAClB,IAAI,CAAC,aAAa,GAAG,IAAI;QAEzB,oDAAoD;QACpD,MAAM,QAAQ,GAAoB,EAAE;QACpC,OAAM,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,EAAE;YACpC,MAAM,IAAI,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,EAAG;YACzC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC;SACpB;QAED,OAAO,CAAC,IAAI,CAAC,gBAAgB,EAAE,QAAQ,EAAE,IAAI,CAAC,GAAG,CAAC;QAElD,OAAO,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;;YAC1B,OAAM,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;gBACzB,MAAM,IAAI,GAAG,QAAQ,CAAC,KAAK,EAAG;gBAC9B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,IAAI;gBAC5B,UAAI,CAAC,GAAG,0CAAE,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,EAAE,GAAG,EAAE;oBACxC,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC;gBAC7B,CAAC,CAAC;aACH;YACD,IAAI,CAAC,aAAa,GAAG,KAAK;QAC5B,CAAC,CAAC;IACJ,CAAC;CACF;AA1DD,0CA0DC;;;;;;;;;;;;;;AClND,iFAAsC;AAEtC,IAAI,UAAU,GAAW,CAAC;AAE1B,SAAgB,KAAK;IACnB,UAAU,GAAG,CAAC;AAChB,CAAC;AAFD,sBAEC;AAED,SAAgB,QAAQ;IACtB,MAAM,EAAE,GAAG,UAAU;IACrB,UAAU,IAAI,CAAC;IACf,OAAO,EAAE;AACX,CAAC;AAJD,4BAIC;AAEM,MAAM,IAAI,GAAG,GAAG,EAAE,GAAE,CAAC;AAAf,YAAI,QAAW;AAEf,mBAAW,GAAQ;IAC9B,MAAM,EAAE,oBAAQ,CAAC,IAAI;IACrB,MAAM,EAAE,oBAAQ,CAAC,IAAI;IACrB,MAAM,EAAE,oBAAQ,CAAC,IAAI;CACtB;AAEM,MAAM,UAAU,GAAG,CAAC,MAAe,EAAE,EAAE,CAAC,OAAO,MAAM,KAAK,UAAU;AAA9D,kBAAU,cAAoD","sources":["webpack://mini-taro/./demo/pages/page-entry/index.css","webpack://mini-taro/./build/page-entry.ts","webpack://mini-taro/./demo/pages/page-entry/index.tsx","webpack://mini-taro/./demo/util.ts","webpack://mini-taro/./src/createAppConfig.ts","webpack://mini-taro/./src/createPageConfig.ts","webpack://mini-taro/./src/hooks.ts","webpack://mini-taro/./src/host-config.ts","webpack://mini-taro/./src/hydrate.ts","webpack://mini-taro/./src/index.ts","webpack://mini-taro/./src/interface.ts","webpack://mini-taro/./src/native-components.ts","webpack://mini-taro/./src/render.ts","webpack://mini-taro/./src/short-cut.ts","webpack://mini-taro/./src/taro-element.ts","webpack://mini-taro/./src/util.ts"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","import { EntryPage } from '../demo/pages/page-entry'\nimport { createPageConfig } from '@/index'\n\nPage(createPageConfig(EntryPage, { root: { nn: '' } }, { path: 'pages/page-entry/index' }))\n","// function组件页面的实例\n\nimport React, { FC, useState, useEffect } from 'react'\nimport { View, Text, Button, Input, useReady, useDidHide, useDidShow } from '@/index'\nimport { native } from '../../util'\n\nimport './index.css'\n\nexport const EntryPage: FC = () => {\n\n  const [name, setName] = useState('')\n  const [count, setCount] = useState(0)\n  const [list, setList] = useState([\n    { key: 1, value: '这是第1个' },\n    { key: 2, value: '这是第2个' },\n    { key: 3, value: '这是第3个' },\n  ])\n\n  useEffect(() => {\n    console.log('[useEffect] Page Entry loaded!')\n    return () => {\n      console.log('[useEffect] Page Entry destroyed!')\n    }\n  }, [])\n\n  // useReady Hook\n  useReady(() => {\n    console.log('[useReady] Page Entry ready')\n  })\n\n  // useDidShow\n  useDidShow(() => {\n    console.log('[useDidShow] Page Entry show')\n  })\n\n  // useDidHide\n  useDidHide(() => {\n    console.log('[useDidHide] Page Entry hide')\n  })\n\n  const increment = () => {\n    setCount((val) => val + 1)\n  }\n\n  const changeName = (e: any) => {\n    const value = e?.detail?.value || ''\n    setName(value)\n  }\n\n  const addItem = () => {\n    setList((arr) => arr.concat({ key: arr.length + 1, value: `这是第${arr.length + 1}个` }))\n  }\n\n  const deleteItem = () => {\n    setList((arr) => arr.length <= 1 ? arr : arr.slice(0, -1))\n  }\n\n  const go = () => {\n    native.navigateTo({\n      url: '/pages/page-second/index',\n    })\n  }\n\n  return (\n    <View className=\"wrapper\">\n      <View style={{ color: 'blue' }}>\n        <Text style={{ fontSize: '25px', fontWeight: '600' }}>style样式</Text>\n        <Text className=\"class-sample\">css样式</Text>\n      </View>\n      <View>列表</View>\n      <View style={{ color: 'red' }}>\n        {list.map((p) => {\n          return <View key={p.key}>{p.value}</View>\n        })}\n      </View>\n      <View className=\"inline-block\">\n        <Button onClick={() => addItem()} type=\"warn\">\n          增加列表item\n        </Button>\n        <Button onClick={() => deleteItem()} type=\"default\">\n          删除列表item\n        </Button>\n      </View>\n      <View style={{ margin: '20px 0' }}>\n        <Text>count: {count}</Text>\n        <Button onClick={() => increment()} type=\"primary\">\n          数字加一\n        </Button>\n      </View>\n      <View>\n        <Text>name: {name}</Text>\n        <Input\n          style={{ border: '1px solid blue' }}\n          onInput={(e) => changeName(e)}\n        />\n      </View>\n      <View style={{ marginTop: '20px' }}>\n        <Button type=\"default\" onClick={() => go()}>\n          去下一个页面\n        </Button>\n      </View>\n    </View>\n  )\n}\n","// tt/wx/qq等顶层对象处理\n\nexport const native = ck1() || ck2() || ck3() || ck4() || ck5() || ck6() || error()\n\nfunction ck1() {try{return tt}catch(e){return undefined}}\nfunction ck2() {try{return wx}catch(e){return undefined}}\nfunction ck3() {try{return qq}catch(e){return undefined}}\nfunction ck4() {try{return jd}catch(e){return undefined}}\nfunction ck5() {try{return my}catch(e){return undefined}}\nfunction ck6() {try{return swan}catch(e){return undefined}}\nfunction error() { throw new Error('未支持的小程序类型') }\n","import React, { ComponentClass } from 'react'\nimport { NodeType, Props } from './interface'\nimport { render } from './render'\nimport { TaroElement, TaroRootElement } from './taro-element'\n\nexport interface ReactPageComponent<T = Props> extends ComponentClass<T> {}\n\nconst RootElement = new TaroElement({\n  id: Infinity,\n  props: {},\n  nodeName: 'view',\n  type: NodeType.ROOT,\n})\n\ntype PageElement = React.CElement<Props, React.Component<Props, any, any>>\n\ntype PageComponent = () => PageElement\n\nconst h = React.createElement\n\nconst EMPTY_OBJ: any = {}\n\nexport let PageContext: React.Context<string> = EMPTY_OBJ\n\nconst connectReactPage = (id: string) => {\n  return (component: ReactPageComponent) => {\n    if (PageContext === EMPTY_OBJ) {\n      PageContext = React.createContext('')\n    }\n\n    return class Page extends React.Component {\n      componentDidCatch(error: Error, info: React.ErrorInfo) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.warn(error)\n          console.error(info.componentStack)\n        }\n      }\n\n      render() {\n        // 名称是'root'的dom节点就是页面顶层节点了，在hostConfig中处理成不同节点\n        return h(\n          'root',\n          { pageId: id },\n          h(\n            PageContext.Provider,\n            { value: id },\n            h(component, { ...this.props }),\n          ),\n        )\n      }\n    }\n  }\n}\n\nexport const createAppConfig = (App: React.ComponentClass) => {\n  // 这个Wrapper就是一个代理，将小程序的更新代理到这个页面组件上，再将页面最近的更新setData回小程序\n  class AppWrapper extends React.Component {\n    public pages: PageComponent[] = []\n    public elements: PageElement[] = []\n\n    public mount(component: ComponentClass<Props>, id: string, cb: () => void) {\n      const key = id\n      const page = () => h(component, { key, tid: id })\n      this.pages.push(page)\n\n      // 强制更新一次\n      this.forceUpdate(cb)\n    }\n\n    public unmount(id: string, cb: () => void) {\n      const idx = this.elements.findIndex((item) => item.props.tid === id)\n      this.elements.splice(idx, 1)\n\n      this.forceUpdate(cb)\n    }\n\n    public render() {\n      while (this.pages.length > 0) {\n        const page = this.pages.pop()!\n        this.elements.push(page())\n      }\n\n      const props: Record<string, unknown> | null = null\n\n      return React.createElement(App, props, this.elements.slice())\n    }\n  }\n\n  const wrapper: AppWrapper = render(\n    React.createElement(AppWrapper),\n    RootElement,\n  ) as AppWrapper\n\n  const createConfig = () => {\n    // app的配置不能是一个复杂对象。。\n    const config = Object.create({\n      mount: function (\n        component: ReactPageComponent,\n        id: string,\n        cb: () => void,\n      ) {\n        const page = connectReactPage(id)(component)\n        wrapper.mount(page, id, cb)\n      },\n      unmount: function (id: string, cb: () => void) {\n        wrapper.unmount(id, cb)\n      },\n      onLaunch: function (options: Record<string, unknown>) {\n        console.warn('app onLaunch')\n      },\n      onShow: function (options: any) {\n        //\n      },\n      onHide: function () {\n        //\n      },\n      onError: function (msg: any) {\n        console.log('app error', msg)\n      },\n      getTree: function () {\n        return RootElement\n      },\n    })\n\n    return config\n  }\n\n  return createConfig()\n}\n\n// 页面顶层元素是TaroRootElement props内包含一个pageId，值是当前页面路径\n// 查找指定的页面root元素\nexport function getTaroRootElementByUid(\n  rootElement: TaroElement,\n  uid: string,\n): TaroRootElement | undefined {\n  const queue: TaroElement[] = []\n  let target: TaroRootElement | undefined = undefined\n  // 广度优先查找\n  queue.push(rootElement)\n  while (queue.length > 0) {\n    const t = queue.shift()!\n    if (t.getAttribute('pageId') === uid) {\n      target = t as TaroRootElement\n      break\n    } else {\n      t.children?.map((item) => queue.push(item))\n    }\n  }\n  return target\n}\n\n// 查找指定的页面内元素\nexport function getTaroElementById(\n  rootElement: TaroElement,\n  id: string,\n): TaroElement | undefined {\n  const queue: TaroElement[] = []\n  let target: TaroElement | undefined = undefined\n  queue.push(rootElement)\n  while (queue.length > 0) {\n    const t = queue.shift()!\n    if (t.getAttribute('uid') === id) {\n      target = t as TaroElement\n      break\n    } else {\n      t.children?.map((item) => queue.push(item))\n    }\n  }\n  return target\n}\n","import React, { ComponentClass, FunctionComponent } from 'react'\nimport {\n  getTaroElementById,\n  getTaroRootElementByUid,\n  PageContext,\n} from './createAppConfig'\nimport { TaroRootElement } from './taro-element'\nimport { isFunction } from './util'\n\ntype PageComponent = FunctionComponent | ComponentClass\n\nexport const createPageConfig = (\n  Component: PageComponent,\n  initData: Record<string, unknown>,\n  pageConfig: { path: string },\n) => {\n  const { path } = pageConfig\n  const pageUid = path\n\n  let app: any = null\n  try {\n    app = getApp()\n  } catch (e) {\n    console.error(e)\n  }\n\n  const getPageElement = () => {\n    const rootElement = (app as any).getTree()\n    return getTaroRootElementByUid(rootElement, pageUid) as TaroRootElement\n  }\n\n  const getElement = (id: string) => {\n    const rootElement = (app as any).getTree()\n    return getTaroElementById(rootElement, id)\n  }\n\n  // 所有事件汇总到一个方法上\n  const eventHandler = (e: any) => {\n    // 这里使用currentTarget是为了避免被冒泡影响\n    const { type: eventName, currentTarget = {} } = e || {}\n    const { id = '' } = currentTarget\n    const pageElement = getPageElement()\n    if (id && pageElement?.ctx) {\n      const currentElement = getElement(id)\n      if (!currentElement) return\n      currentElement.dispatchEvent(eventName, e)\n    }\n  }\n\n  const createConfig = () => {\n    const config = Object.create({\n      data: initData,\n      onLoad: function (options: unknown) {\n        console.warn('page onLoad', options)\n        // 小程序page实例\n        const page = this\n        this.$taroPath = pageUid\n        app &&\n          app.mount(Component, this.$taroPath, () => {\n            const pageElement = getPageElement()\n            if (pageElement) {\n              pageElement.ctx = page\n              pageElement.performUpdate()\n            }\n          })\n      },\n      onShow: function() {\n        safeExecute('onShow', pageUid)\n      },\n      onHide: function() {\n        safeExecute('onHide', pageUid)\n      },\n      onReady: function() {\n        safeExecute('onReady', pageUid)\n      },\n      onUnload: function () {\n        app &&\n          app.unmount(pageUid, () => {\n            console.warn(`page: ${pageUid} unmount`)\n          })\n      },\n      eh: eventHandler,\n    })\n\n    return config\n  }\n\n  return createConfig()\n}\n\nconst hooks = new Map<string, Map<string, Function>>()\n\nfunction safeExecute(lifeCycle: string, uid: string) {\n  // 这里可以将小程序生命周期hook执行\n  if (!hooks.has(uid)) return\n  const target = hooks.get(uid)!\n  const cb = target.get(lifeCycle)\n  if (cb && isFunction(cb)) {\n    cb.call(null)\n  }\n}\n\nexport function taroHook(lifeCycle: string) {\n  return (cb: Function) => {\n    // 这样拿到对应页面的uid\n    const id = React.useContext(PageContext)\n    const cbRef = React.useRef(cb)\n\n    React.useLayoutEffect(() => {\n      if (!isFunction(cbRef.current)) return\n      if (!hooks.has(id)) hooks.set(id, new Map())\n      const map = hooks.get(id)!\n      map.set(lifeCycle, cbRef.current)\n    }, [])\n  }\n}\n","/**\n * 这里实现的hook对应Taro提供的hook\n * 参考这些hook可以实现出任意需要的业务hook，比如useShareAppMessage，usePageScroll等\n */\nimport { taroHook } from \"./createPageConfig\";\n\nexport const useReady = taroHook('onReady')\n\nexport const useDidShow = taroHook('onShow')\n\nexport const useDidHide = taroHook('onHide')\n","// 这边要借助 react-reconciler 实现一套虚拟dom树的系统\n\nimport ReactReconciler, { HostConfig } from 'react-reconciler'\nimport { NodeName, NodeType, Props } from './interface'\nimport { generate, NodeTypeMap, noop } from './util'\nimport { TaroElement, TaroRootElement, TaroText } from './taro-element'\n\nexport function updateProps (dom: TaroElement, oldProps: Props, newProps: Props) {\n  let i: string\n\n  for (i in oldProps) {\n    if (!(i in newProps)) {\n      setProperty(dom, i, null, oldProps[i])\n    }\n  }\n  for (i in newProps) {\n    if (oldProps[i] !== newProps[i]) {\n      setProperty(dom, i, newProps[i], oldProps[i])\n    }\n  }\n}\n\nfunction isEventName (s: string) {\n  return s[0] === 'o' && s[1] === 'n'\n}\n\nfunction setEvent(dom: TaroElement, name: string, value: unknown) {\n  let eventName = name.toLowerCase().slice(2)\n\n  if (eventName === 'click') {\n    eventName = 'tap'\n  }\n\n  if (typeof value === 'function') {\n    dom.addEventListener(eventName, value)\n  } else {\n    dom.removeEventListener(eventName)\n  }\n}\n\n/** \n * 判断属性，处理属性\n */\nfunction setProperty (dom: TaroElement, name: string, value: unknown, oldValue?: unknown) {\n  // className转class\n  name = name === 'className' ? 'class' : name\n\n  if (\n    name === 'key' ||\n    name === 'children' ||\n    name === 'ref'\n  ) {\n    // 跳过\n  } else if (name === 'style') {\n    // TODO 需要处理style的变化\n  } else if (isEventName(name)) {\n    // 事件 onClick等\n    setEvent(dom, name, value)\n  } else if (value == null) {\n    dom.removeAttribute(name)\n  } else {\n    dom.setAttribute(name, value as string)\n  }\n}\n\nconst hostConfig: HostConfig<\n  string, // Type\n  Props, // Props\n  TaroElement, // Container\n  TaroElement, // Instance\n  TaroText, // TextInstance\n  TaroElement, // SuspenseInstance\n  TaroElement, // HydratableInstance\n  TaroElement, // PublicInstance\n  Record<string, any>, // HostContext\n  string[], // UpdatePayload\n  unknown, // ChildSet\n  unknown, // TimeoutHandle\n  unknown // NoTimeout\n> = {\n  createInstance(\n    type: string,\n    props: Props,\n    rootContainer: TaroElement,\n    hostContext: unknown,\n    internalHandle: unknown,\n  ): TaroElement {\n    const conf = {\n      id: generate(),\n      type: NodeTypeMap[type] || NodeType.VIEW,\n      nodeName: type as NodeName,\n      props,\n      children: [],\n    }\n    if (type === 'root') {\n      return new TaroRootElement(conf)\n    } else {\n      return new TaroElement(conf)\n    }\n  },\n  createTextInstance(\n    text: string,\n    rootContainer: TaroText,\n    hostContext: unknown,\n    internalHandle: unknown,\n  ): TaroText {\n    const vnode = new TaroText({\n      id: generate(),\n      type: NodeType.TEXT,\n      nodeName: 'text',\n      props: {},\n      text,\n    })\n    return vnode\n  },\n  getPublicInstance (inst: TaroElement) {\n    return inst\n  },\n\n  getRootHostContext () {\n    return {}\n  },\n\n  getChildHostContext () {\n    return {}\n  },\n\n  appendChild (parent, child) {\n    parent.appendChild(child)\n  },\n\n  appendInitialChild (parent, child) {\n    parent.appendChild(child)\n  },\n\n  appendChildToContainer (parent, child) {\n    parent.appendChild(child)\n  },\n\n  removeChild (parent, child) {\n    parent.removeChild(child)\n  },\n\n  removeChildFromContainer (parent, child) {\n    parent.removeChild(child)\n  },\n\n  insertBefore (parent, child, refChild) {\n    parent.insertBefore(child, refChild)\n  },\n\n  insertInContainerBefore (parent, child, refChild) {\n    parent.insertBefore(child, refChild)\n  },\n\n  commitTextUpdate (textInst, _, newText) {\n    textInst.textContext = newText\n  },\n\n  finalizeInitialChildren (dom, _, props) {\n    updateProps(dom, {}, props)\n    return false\n  },\n\n  prepareUpdate () {\n    return []\n  },\n\n  commitUpdate (dom, _payload, _type, oldProps, newProps) {\n    updateProps(dom, oldProps, newProps)\n  },\n\n  clearContainer (element) {\n    if (element.children && element.children.length > 0) {\n      element.children = []\n    }\n  },\n\n  shouldSetTextContent: () => false,\n  prepareForCommit (..._: any[]) { return null },\n  resetAfterCommit: noop,\n  commitMount: noop,\n  now: () => Date.now(),\n  cancelTimeout: clearTimeout,\n  scheduleTimeout: setTimeout,\n  preparePortalMount: noop,\n  noTimeout: -1,\n  supportsMutation: true,\n  supportsPersistence: false,\n  isPrimaryRenderer: true,\n  supportsHydration: false\n}\n\nconst TaroReconciler = ReactReconciler(hostConfig)\n\n// TaroReconciler.injectIntoDevTools({\n//   bundleType: 1,\n//   version: '0.0.1',\n//   rendererPackageName: 'mini-taro'\n// })\n\nexport {\n  TaroReconciler,\n  ReactReconciler,\n}\n","import { MiniData, NodeType } from \"./interface\"\nimport { Short } from \"./short-cut\"\nimport { TaroElement } from \"./taro-element\"\n\nconst isEmpty = (children: any[] | undefined) => {\n  return !children || (Array.isArray(children) && children.length === 0)\n}\n\nexport const generateUid = (id: number) => `u-${id}`\n\n/**\n * \n * 这个函数是将虚拟dom树转为了渲染属性树\n * @param node \n * @returns \n */\nexport const hydrate = (node: TaroElement): MiniData => {\n  if (node.type === NodeType.TEXT && isEmpty(node.children)) {\n    return {\n      [Short.Text]: node.text || '',\n      [Short.NodeName]: node.nodeName,\n    }\n  } else {\n    const { nodeName, props, id, children } = node\n    const { className, style, children: _children, ...nextProps } = props || {}\n\n    // style字符串化 + 驼峰转横线\n    let styleContent = ''\n    if (!!style) {\n      for (const [key, value] of Object.entries(style as Object)) {\n        styleContent += `${styleTransform(key)}: ${value};`\n      }\n    }\n\n    return {\n      [Short.Childnodes]: !!children && Array.isArray(children) ? children.map(hydrate) : [],\n      [Short.NodeName]: nodeName,\n      [Short.Class]: className as string || '',\n      [Short.Style]: styleContent as string,\n      uid: generateUid(id),\n      ...nextProps,\n    }\n  }\n}\n\n// fontSize -> font-size\nexport const styleTransform = (name: string) => {\n  const list = name.split('')\n  const index = list.findIndex(p => /[A-Z]/.test(p))\n  if (index >= 0) list.splice(index, 1, '-' + list[index].toLowerCase())\n  return list.join('')\n}\n","export { createPageConfig } from './createPageConfig'\nexport { createAppConfig } from './createAppConfig'\nexport * from './hooks'\nexport * from './native-components'\n","// import { VNode } from \"./vnode\"\n\nimport { Short } from \"./short-cut\"\n\nenum NodeType {\n  ROOT,\n  TEXT,\n  VIEW\n}\n\ntype Props = Record<string, unknown>\n\n\nexport interface MpInstance {\n  config: Record<string, unknown>\n  setData: (data: unknown, cb: () => void) => void\n  $taroParams?: Record<string, unknown>\n  $taroPath: string\n  data: any\n  selectComponent: (selector: string) => any\n}\n\nexport type UpdatePayloadValue = string | boolean | MiniData | MiniData[]\nexport type DataTree = Record<string, UpdatePayloadValue>\n\nexport interface UpdatePayload {\n  path: string;\n  value: UpdatePayloadValue\n}\n\nexport interface MiniElementData {\n  [Short.Childnodes]?: MiniData[]\n  [Short.NodeName]: string\n  [Short.Class]?: string\n  [Short.Style]?: string\n  uid: string\n  [key: string]: unknown\n}\n\nexport interface MiniTextData {\n  [Short.Text]: string\n  [Short.NodeName]: string\n}\n\nexport type MiniData = MiniElementData | MiniTextData\n\nexport type NodeName = 'view' | 'text' | '#text' | 'button'\n\nexport {\n  NodeType,\n  Props,\n}\n","// 基础组件实现\n// 原生组件实际就是react组件，名称上与小程序组件对齐\n\nimport React, { CSSProperties } from 'react'\n\ntype Func = (...params: any[]) => void;\n\nconst createNativeComponent = (name: string, props?: Record<string, unknown>) => {\n  return (params: { children?: any; className?: string; style?: CSSProperties; onClick?: Func; type?: string; onInput?: Func; }) => {\n    const { children, ...nextParams } = params || {}\n    return React.createElement(name, { ...nextParams }, children)\n  }\n}\n\nexport const View = createNativeComponent('view', {})\n\nexport const Text = createNativeComponent('text', {})\n\nexport const Button = createNativeComponent('button', {})\n\nexport const Input = createNativeComponent('input', {})\n\n","// 这边要借助 react-reconciler 实现一套虚拟dom树的系统\n\nimport React, { ReactNode } from 'react'\nimport { TaroReconciler } from './host-config'\nimport { TaroElement } from './taro-element'\n\n\nconst render = (component: ReactNode, container: TaroElement) => {\n\n  if (!container._rootContainer) {\n    container._rootContainer = TaroReconciler.createContainer(container, 0, false, null);\n  }\n\n  TaroReconciler.updateContainer(component, container._rootContainer, null)\n  \n  return TaroReconciler.getPublicRootInstance(container._rootContainer)\n}\n\nexport { render }\n","\nexport const RootName = 'root'\n\n// 这里使用Taro的缩写\nexport const enum Short {\n  Container = \"container\",\n  Childnodes = \"cn\",\n  Text = \"v\",\n  NodeType = \"nt\",\n  NodeName = \"nn\",\n  Style = \"st\",\n  Class = \"cl\",\n  Src = \"src\"\n}\n","import { MpInstance, NodeName, NodeType, Props, UpdatePayload } from \"./interface\";\nimport { RootName, Short } from \"./short-cut\";\nimport { generateUid, hydrate } from \"./hydrate\";\n\nexport class TaroElement {\n\n  public props: Props\n  public _rootContainer: unknown\n\n  public id: number;\n  public type: NodeType;\n  public nodeName: NodeName;\n  public children?: TaroElement[];\n  public text?: string;\n  public parentNode: TaroElement | null = null\n  public __handlers: Map<string, Function> = new Map()\n\n  constructor(params: {\n    id: number;\n    type: NodeType;\n    nodeName: NodeName;\n    props: Props\n    children?: TaroElement[];\n    text?: string;\n  }) {\n    const { id, type, nodeName, props, children, text } = params\n    this.id = id\n    this.type = type\n    this.nodeName = nodeName\n    this.props = Object.assign({ uid: generateUid(id) }, props)\n    // props中的children是冗余数据\n    if (this.props['children']) {\n      delete this.props['children']\n    }\n    this.children = children\n    this.text = text\n  }\n\n  private onAttributeUpdate() {\n    if (!this.parentNode) return\n    const index = this.parentNode.children?.findIndex((p) => p.id === this.id)\n    if (!index || index < 0) return\n    this._root?.enqueueUpdate({\n      path: `${this.parentNode?._path}.${Short.Childnodes}[${index}]`,\n      value: hydrate(this),\n    })\n  }\n\n  setAttribute(name: string, value: unknown) {\n    this.props[name] = value\n    this.onAttributeUpdate()\n  }\n\n  getAttribute(name: string) {\n    return this.props[name]\n  }\n\n  removeAttribute(name: string) {\n    if (name in this.props) {\n      delete this.props[name]\n      this.onAttributeUpdate()\n    }\n  }\n\n  get _path (): string {\n    const parentNode = this.parentNode\n    if (!parentNode || !Array.isArray(parentNode.children)) return ''\n    const index = parentNode.children.findIndex((p) => p.id === this.id)\n    return `${parentNode._path}.${Short.Childnodes}[${index}]`\n  }\n\n  protected get _root (): TaroRootElement | null {\n    return this.parentNode?._root || null\n  }\n\n  appendChild(child: TaroElement) {\n    child.parentNode = this\n    if (!this.children) {\n      this.children = [child]\n    } else {\n      this.children.push(child)\n    }\n    this._root?.enqueueUpdate({\n      path: `${this._path}.${Short.Childnodes}`,\n      value: this.children.map(hydrate),\n    })\n  }\n\n  insertBefore(child: TaroElement, beforeChild: TaroElement) {\n    if (!this.children) return\n    const index = this.children.findIndex((item) => item.id === beforeChild.id)\n    if (index < 0) return\n    child.parentNode = this\n    this.children.splice(index, 0, child)\n    this._root?.enqueueUpdate({\n      path: `${this._path}.${Short.Childnodes}`,\n      value: this.children.map(hydrate),\n    })\n  }\n\n  removeChild(child: TaroElement) {\n    if (!this.children) return\n    const index = this.children.findIndex((item) => item.id === child.id)\n    if (index < 0) return\n    this.children.splice(index, 1)\n    this._root?.enqueueUpdate({\n      path: `${this._path}.${Short.Childnodes}`,\n      value: this.children.map(hydrate),\n    })\n  }\n\n  addEventListener(eventName: string, value: Function) {\n    this.__handlers.set(eventName, value)\n  }\n\n  removeEventListener(eventName: string) {\n    this.__handlers.delete(eventName)\n  }\n\n  // 触发事件（忽略冒泡和捕获）\n  // taro3内部会二次封装这个事件，处理冒泡等行为，此处简化\n  dispatchEvent(eventName: string, e: unknown) {\n    if (this.__handlers.has(eventName)) {\n      const fn = this.__handlers.get(eventName)\n      typeof fn === 'function' && fn(e)\n    }\n  }\n}\n\nexport class TaroText extends TaroElement {\n\n  constructor(params: {\n    id: number\n    type: NodeType\n    nodeName: NodeName\n    props: Props\n    children?: TaroElement[]\n    text?: string\n  }) {\n    super(params)\n    this.nodeName = '#text'\n  }\n\n  set textContext(text: string) {\n    this.text = text\n    this._root?.enqueueUpdate({\n      path: `${this._path}.${Short.Text}`,\n      value: text,\n    })\n  }\n}\n\nexport class TaroRootElement extends TaroElement {\n  public updatePayloads: UpdatePayload[] = []\n  public ctx: null | MpInstance = null\n  private pendingUpdate: boolean = false\n\n  constructor(params: {\n    id: number\n    type: NodeType\n    nodeName: NodeName\n    props: Props\n    children?: TaroElement[]\n    text?: string\n  }) {\n    super(params)\n  }\n\n  get _root(): TaroRootElement {\n    return this\n  }\n\n  // 页面顶层root节点让_path返回顶层名称\n  get _path (): string {\n    return RootName\n  }\n\n  public enqueueUpdate (payload: UpdatePayload) {\n    this.updatePayloads.push(payload)\n\n    console.warn('updatePayloads', [...this.updatePayloads])\n  \n    if (!this.pendingUpdate && this.ctx !== null) {\n      this.performUpdate()\n    }\n  }\n\n  public performUpdate() {\n    this.pendingUpdate = true\n\n    // TODO 这里可以优化，将所有的复杂payloads合并为最小payloads，传给setData\n    const elements: UpdatePayload[] = []\n    while(this.updatePayloads.length > 0) {\n      const item = this.updatePayloads.shift()!\n      elements.push(item)\n    }\n\n    console.warn('setData before', elements, this.ctx)\n\n    Promise.resolve().then(() => {\n      while(elements.length > 0) {\n        const item = elements.shift()!\n        const { path, value } = item\n        this.ctx?.setData({ [path]: value }, () => {\n          console.warn('setData end')\n        })\n      }\n      this.pendingUpdate = false\n    })\n  }\n}\n","import { NodeType } from \"./interface\"\n\nlet instanceId: number = 0\n\nexport function reset() {\n  instanceId = 0\n}\n\nexport function generate() {\n  const id = instanceId\n  instanceId += 1\n  return id\n}\n\nexport const noop = () => {}\n  \nexport const NodeTypeMap: any = {\n  'view': NodeType.VIEW,\n  'text': NodeType.TEXT,\n  'root': NodeType.ROOT\n}\n\nexport const isFunction = (target: unknown) => typeof target === 'function'\n"],"names":[],"sourceRoot":""}